--
-- This test contains two transactions, each with three Operations.
-- The test was developed to study the impact of a shared resource between Operations executed on different CPUs
-- As we were advised, MAST condenses operations scheduled under the same Scheduling_Server into one single operation
-- It appears to us this could make MAST optimistic, which is detailed in the attached visio document.
--

Processing_Resource (
			    Type                   => Regular_Processor,
				Name                   => cpu_0,
				Max_Interrupt_Priority => 32767,
				Min_Interrupt_Priority => 1,
				Worst_ISR_Switch       => 0.0,
				Avg_ISR_Switch         => 0.0,
				Best_ISR_Switch        => 0.0,
				Speed_Factor           => 1.0	
	);
Processing_Resource (
			    Type                   => Regular_Processor,
				Name                   => cpu_1,
				Max_Interrupt_Priority => 32767,
				Min_Interrupt_Priority => 1,
				Worst_ISR_Switch       => 0.0,
				Avg_ISR_Switch         => 0.0,
				Best_ISR_Switch        => 0.0,
				Speed_Factor           => 1.0	
	);
Scheduler (
			   Type            => Primary_Scheduler,
			   Name            => cpu_0_Scheduler,
			   Policy          => 	( 
			   			Type                 => Fixed_Priority,
			   		    Worst_Context_Switch => 0.0,
			   		    Avg_Context_Switch   => 0.0,
			   		    Best_Context_Switch  => 0.0,
			   		    Max_Priority         => 32767,
			   		    Min_Priority         => 1	
			   	),
			   Host            => cpu_0	
	);
Scheduling_Server (
	   Type                       	=> Regular,
	   Name                       	=> Sch_Svr_0,
	   Scheduler                 	=> cpu_0_Scheduler,
	   Server_Sched_Parameters		=> 	( 
	   		Type                   => Polling_Policy,
	   		The_Priority           => 128,
	   		Preassigned            => NO,
	   		Polling_Period         => 30.0,
	   		Polling_Worst_Overhead => 0.0,
	   		Polling_Best_Overhead  => 0.0,
	   		Polling_Avg_Overhead   => 0.0	
	   	)
	);
Scheduling_Server (
	   Type                       	=> Regular,
	   Name                       	=> Sch_Svr_1,
	   Scheduler                 	=> cpu_0_Scheduler,
	   Server_Sched_Parameters		=> 	( 
	   		Type                   => Polling_Policy,
	   		The_Priority           => 129,
	   		Preassigned            => NO,
	   		Polling_Period         => 40.0,
	   		Polling_Worst_Overhead => 0.0,
	   		Polling_Best_Overhead  => 0.0,
	   		Polling_Avg_Overhead   => 0.0	
		)
   	);

Operation (
		Type                       => Simple,
		Name                       => Tr0_Op0,
		Worst_Case_Execution_Time  => 50.0,
		Avg_Case_Execution_Time    => 50.0,
		Best_Case_Execution_Time   => 50.0
		
	);
Operation (
		Type                       => Simple,
		Name                       => Tr0_Op1,
		Worst_Case_Execution_Time  => 30.0,
		Avg_Case_Execution_Time    => 30.0,
		Best_Case_Execution_Time   => 30.0	
	);
Operation (
		Type                       => Simple,
		Name                       => Tr1_Op0,
		Worst_Case_Execution_Time  => 40.0,
		Avg_Case_Execution_Time    => 40.0,
		Best_Case_Execution_Time   => 40.0
	);
Operation (
		Type                       => Simple,
		Name                       => Tr1_Op1,
		Worst_Case_Execution_Time  => 60.0,
		Avg_Case_Execution_Time    => 60.0,
		Best_Case_Execution_Time   => 60.0
	);
-- Myrtille
Transaction (
		Type            => regular,
		Name            => Transaction_0,
		External_Events => (
		(
			Type				=> Periodic,
			Name            		=> Tr0_Ex_Evt,
			Period				=> 200.0,
			Max_Jitter			=> 0.0,
			Phase				=> 0.0	
		)
		),
		Internal_Events => ( 
		(
			Type            => Regular,
			Name            => Tr0_In_Evt0	
		)
		,(
			Type            => Regular,
			Name            => Tr0_In_Evt1	
		)
		),
		Event_Handlers  => ( 
		(
			Type               => Activity,
			Input_Event        => Tr0_Ex_Evt,
			Output_Event       => Tr0_In_Evt0,
			Activity_Operation => Tr0_Op0,
			Activity_Server    => Sch_Svr_0	
		)
		,(
			Type               => Activity,
			Input_Event        => Tr0_In_Evt0,
			Output_Event       => Tr0_In_Evt1,
			Activity_Operation => Tr0_Op1,
			Activity_Server    => Sch_Svr_0		
		)
		)	
	);	
-- cafÃ©
Transaction (
		Type            => regular,
		Name            => Transaction_1,
		External_Events => (
		(
			Type				=> Periodic,
			Name            		=> Tr1_Ex_Evt,
			Period				=> 280.0,
			Max_Jitter			=> 0.0,
			Phase				=> 0.0	
		)
		),
		Internal_Events => ( 
		(
			Type            => Regular,
			Name            => Tr1_In_Evt0	
		)
		,(
			Type            => Regular,
			Name            => Tr1_In_Evt1	
		)
		),
		Event_Handlers  => ( 
		(
			Type               => Activity,
			Input_Event        => Tr1_Ex_Evt,
			Output_Event       => Tr1_In_Evt0,
			Activity_Operation => Tr1_Op0,
			Activity_Server    => Sch_Svr_1	
		)
		,(
			Type               => Activity,
			Input_Event        => Tr1_In_Evt0,
			Output_Event       => Tr1_In_Evt1,
			Activity_Operation => Tr1_Op1,
			Activity_Server    => Sch_Svr_1		
		)
		)	
	);	
